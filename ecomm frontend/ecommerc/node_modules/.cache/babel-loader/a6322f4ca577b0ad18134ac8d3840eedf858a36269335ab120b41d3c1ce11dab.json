{"ast":null,"code":"import React,{createContext,useEffect,useState}from\"react\";//import all_product from \"../Components/Assets/all_product\";\n//import Shop from \"../pages/Shop\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);const[cartItems,setCartItems]=useState(getDefaultCart());/*variable and function , function*/useEffect(()=>{fetch('http://localhost:4000/allproducts').then(response=>response.json()).then(data=>setAll_Product(data));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/getcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:\"\"}).then(response=>response.json()).then(data=>setCartItems(data));}},[]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/addtocart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemID\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/removefromcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemID\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));totalAmount+=itemInfo.new_price*cartItems[item];}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in cartItems){if(cartItems[item]>0){totalItem+=cartItems[item];}}return totalItem;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","cartItems","setCartItems","fetch","then","response","json","data","localStorage","getItem","method","headers","Accept","concat","body","addToCart","itemId","prev","JSON","stringify","console","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["C:/Users/eswar/Desktop/ecomm total/ecomm frontend/ecommerc/src/Context/ShopContext.jsx"],"sourcesContent":["import React,{ createContext ,useEffect,useState}from \"react\"\r\n//import all_product from \"../Components/Assets/all_product\";\r\n//import Shop from \"../pages/Shop\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\n\r\nconst getDefaultCart=()=>{\r\n    let cart={};\r\n    for(let index=0;index<300+1;index++)\r\n    {\r\n        cart[index]=0;\r\n    }\r\n    return cart;\r\n}\r\n\r\nconst ShopContextProvider = (props)=>{\r\n\r\n    const [all_product,setAll_Product]=useState([]);\r\n    const [cartItems,setCartItems]=useState(getDefaultCart())/*variable and function , function*/\r\n    \r\n    useEffect(()=>{\r\n        fetch('http://localhost:4000/allproducts').then((response)=>response.json()).then((data)=>setAll_Product(data))\r\n\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:4000/getcart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json',\r\n                },\r\n                body:\"\",\r\n            }).then((response)=>response.json()).then((data)=>setCartItems(data));\r\n        }\r\n    },[])\r\n    \r\n    const addToCart=(itemId)=>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]+1}));\r\n        if(localStorage.getItem('auth-token')) {\r\n            fetch('http://localhost:4000/addtocart',{\r\n            method: 'POST' ,\r\n            headers :{\r\n            Accept:'application/form-data',\r\n            'auth-token' : `${localStorage.getItem('auth-token')}`,\r\n            'Content-Type' :'application/json',\r\n        },\r\n        body:JSON.stringify({\"itemID\":itemId}),\r\n    }).then((response)=>response.json()).then((data)=>console.log(data));\r\n    }\r\n}\r\n    const removeFromCart=(itemId)=>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]-1}));\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:4000/removefromcart',{\r\n                method: 'POST' ,\r\n                headers :{\r\n                Accept:'application/form-data',\r\n                'auth-token' : `${localStorage.getItem('auth-token')}`,\r\n                'Content-Type' :'application/json',\r\n            },\r\n            body:JSON.stringify({\"itemID\":itemId}),\r\n        }).then((response)=>response.json()).then((data)=>console.log(data));\r\n        }\r\n    }\r\n\r\n    const getTotalCartAmount=()=>{\r\n        let totalAmount=0;\r\n        for(const item in cartItems)\r\n        {\r\n            if(cartItems[item]>0)\r\n            {\r\n                let itemInfo = all_product.find((product)=>product.id===Number(item));\r\n                totalAmount+=itemInfo.new_price*cartItems[item];\r\n            }\r\n        }\r\n        return totalAmount;\r\n    }\r\n    \r\n    const getTotalCartItems=()=>{\r\n        let totalItem=0;\r\n        for(const item in cartItems)\r\n        {\r\n            if(cartItems[item]>0)\r\n            {\r\n                totalItem+=cartItems[item];\r\n            }\r\n        }\r\n        return totalItem;\r\n    }\r\n\r\n\r\n    const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart}\r\n\r\n    return (\r\n        <ShopContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </ShopContext.Provider>\r\n    )\r\n}\r\n\r\nexport default ShopContextProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}