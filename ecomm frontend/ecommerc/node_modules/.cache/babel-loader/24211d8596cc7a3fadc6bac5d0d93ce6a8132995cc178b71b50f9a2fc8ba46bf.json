{"ast":null,"code":"import React,{createContext,useEffect,useState}from\"react\";//import all_product from \"../Components/Assets/all_product\";\n//import Shop from \"../pages/Shop\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);const[cartItems,setCartItems]=useState(getDefaultCart());/*variable and function , function*/useEffect(()=>{fetch(\"https://accessify-ecommerce-website.onrender.com/allproducts\").then(response=>response.json()).then(data=>setAll_Product(data));if(localStorage.getItem(\"auth-token\")){fetch(\"https://accessify-ecommerce-website.onrender.com/getcart\",{method:\"POST\",headers:{Accept:\"application/form-data\",\"auth-token\":\"\".concat(localStorage.getItem(\"auth-token\")),\"Content-Type\":\"application/json\"},body:\"\"}).then(response=>response.json()).then(data=>setCartItems(data));}},[]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem(\"auth-token\")){fetch(\"https://accessify-ecommerce-website.onrender.com/addtocart\",{method:\"POST\",headers:{Accept:\"application/form-data\",\"auth-token\":\"\".concat(localStorage.getItem(\"auth-token\")),\"Content-Type\":\"application/json\"},body:JSON.stringify({itemID:itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem(\"auth-token\")){fetch(\"https://accessify-ecommerce-website.onrender.com/removefromcart\",{method:\"POST\",headers:{Accept:\"application/form-data\",\"auth-token\":\"\".concat(localStorage.getItem(\"auth-token\")),\"Content-Type\":\"application/json\"},body:JSON.stringify({itemID:itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));totalAmount+=itemInfo.new_price*cartItems[item];}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in cartItems){if(cartItems[item]>0){totalItem+=cartItems[item];}}return totalItem;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","cartItems","setCartItems","fetch","then","response","json","data","localStorage","getItem","method","headers","Accept","concat","body","addToCart","itemId","prev","JSON","stringify","itemID","console","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["C:/Users/eswar/Desktop/ecomm total/ecomm frontend/ecommerc/src/Context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\n//import all_product from \"../Components/Assets/all_product\";\r\n//import Shop from \"../pages/Shop\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst getDefaultCart = () => {\r\n  let cart = {};\r\n  for (let index = 0; index < 300 + 1; index++) {\r\n    cart[index] = 0;\r\n  }\r\n  return cart;\r\n};\r\n\r\nconst ShopContextProvider = (props) => {\r\n  const [all_product, setAll_Product] = useState([]);\r\n  const [cartItems, setCartItems] = useState(\r\n    getDefaultCart()\r\n  ); /*variable and function , function*/\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://accessify-ecommerce-website.onrender.com/allproducts\")\r\n      .then((response) => response.json())\r\n      .then((data) => setAll_Product(data));\r\n\r\n    if (localStorage.getItem(\"auth-token\")) {\r\n      fetch(\"https://accessify-ecommerce-website.onrender.com/getcart\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/form-data\",\r\n          \"auth-token\": `${localStorage.getItem(\"auth-token\")}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: \"\",\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => setCartItems(data));\r\n    }\r\n  }, []);\r\n\r\n  const addToCart = (itemId) => {\r\n    setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + 1 }));\r\n    if (localStorage.getItem(\"auth-token\")) {\r\n      fetch(\"https://accessify-ecommerce-website.onrender.com/addtocart\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/form-data\",\r\n          \"auth-token\": `${localStorage.getItem(\"auth-token\")}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ itemID: itemId }),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => console.log(data));\r\n    }\r\n  };\r\n  const removeFromCart = (itemId) => {\r\n    setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }));\r\n    if (localStorage.getItem(\"auth-token\")) {\r\n      fetch(\"https://accessify-ecommerce-website.onrender.com/removefromcart\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/form-data\",\r\n          \"auth-token\": `${localStorage.getItem(\"auth-token\")}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ itemID: itemId }),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => console.log(data));\r\n    }\r\n  };\r\n\r\n  const getTotalCartAmount = () => {\r\n    let totalAmount = 0;\r\n    for (const item in cartItems) {\r\n      if (cartItems[item] > 0) {\r\n        let itemInfo = all_product.find(\r\n          (product) => product.id === Number(item)\r\n        );\r\n        totalAmount += itemInfo.new_price * cartItems[item];\r\n      }\r\n    }\r\n    return totalAmount;\r\n  };\r\n\r\n  const getTotalCartItems = () => {\r\n    let totalItem = 0;\r\n    for (const item in cartItems) {\r\n      if (cartItems[item] > 0) {\r\n        totalItem += cartItems[item];\r\n      }\r\n    }\r\n    return totalItem;\r\n  };\r\n\r\n  const contextValue = {\r\n    getTotalCartItems,\r\n    getTotalCartAmount,\r\n    all_product,\r\n    cartItems,\r\n    addToCart,\r\n    removeFromCart,\r\n  };\r\n\r\n  return (\r\n    <ShopContext.Provider value={contextValue}>\r\n      {props.children}\r\n    </ShopContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ShopContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}